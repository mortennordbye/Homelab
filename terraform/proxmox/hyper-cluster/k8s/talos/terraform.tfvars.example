# Talos Kubernetes Cluster Configuration Example
#
# Copy this file to terraform.tfvars and fill in your actual values.
# DO NOT commit terraform.tfvars to version control.

# Proxmox Configuration
proxmox_endpoint     = "https://your-proxmox-host:8006"
proxmox_api_token    = "your-user@pve!token-name=your-token-secret"
proxmox_insecure     = true
proxmox_ssh_username = "root"

# Cluster Configuration
cluster_name    = "talos-cluster"
cluster_vip     = "10.0.0.100"
network_gateway = "10.0.0.1"

# Talos and Kubernetes Versions
talos_version      = "v1.8.3"
kubernetes_version = "v1.31.3"

# Cluster Nodes
nodes = {
  "talos-ctrl-01" = {
    proxmox_node = "pve-node1"
    ip           = "10.0.0.101"
    mac_address  = "BC:24:11:00:00:01"
    vmid         = 800
    cpu_cores    = 2
    memory_mb    = 3072
    disk_size_gb = 10
    datastore    = "local-lvm"
    node_type    = "controlplane"
  }
  "talos-ctrl-02" = {
    proxmox_node = "pve-node1"
    ip           = "10.0.0.102"
    mac_address  = "BC:24:11:00:00:02"
    vmid         = 801
    cpu_cores    = 2
    memory_mb    = 3072
    disk_size_gb = 10
    datastore    = "local-lvm"
    node_type    = "controlplane"
  }
  "talos-ctrl-03" = {
    proxmox_node = "pve-node1"
    ip           = "10.0.0.103"
    mac_address  = "BC:24:11:00:00:03"
    vmid         = 802
    cpu_cores    = 2
    memory_mb    = 3072
    disk_size_gb = 10
    datastore    = "local-lvm"
    node_type    = "controlplane"
  }
  "talos-worker-01" = {
    proxmox_node = "pve-node1"
    ip           = "10.0.0.104"
    mac_address  = "BC:24:11:00:00:04"
    vmid         = 803
    cpu_cores    = 4
    memory_mb    = 4096
    disk_size_gb = 40
    datastore    = "local-lvm"
    node_type    = "worker"
  }
  "talos-worker-02" = {
    proxmox_node = "pve-node1"
    ip           = "10.0.0.105"
    mac_address  = "BC:24:11:00:00:05"
    vmid         = 804
    cpu_cores    = 4
    memory_mb    = 4096
    disk_size_gb = 40
    datastore    = "local-lvm"
    node_type    = "worker"
  }
  "talos-worker-03" = {
    proxmox_node = "pve-node1"
    ip           = "10.0.0.106"
    mac_address  = "BC:24:11:00:00:06"
    vmid         = 805
    cpu_cores    = 4
    memory_mb    = 4096
    disk_size_gb = 40
    datastore    = "local-lvm"
    node_type    = "worker"
  }
}
